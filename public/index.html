<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ADL - Ad Data Logic Universal Tracking</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone@7/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { margin: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; }
        .modal-backdrop { position: fixed; inset: 0; background: rgba(0,0,0,0.5); display: flex; align-items: center; justify-content: center; z-index: 50; padding: 1rem; }
        .modal-content { background: white; border-radius: 0.5rem; padding: 1.5rem; max-width: 28rem; width: 100%; max-height: 90vh; overflow-y: auto; }
        .btn { padding: 0.75rem 1.5rem; border-radius: 0.5rem; font-weight: 500; transition: all 0.2s; cursor: pointer; border: none; }
        .btn-primary { background: #3b82f6; color: white; }
        .btn-primary:hover { background: #2563eb; }
        .btn-secondary { background: #f3f4f6; color: #374151; }
        .btn-secondary:hover { background: #e5e7eb; }
        .input { width: 100%; padding: 0.75rem; border: 1px solid #d1d5db; border-radius: 0.5rem; }
        .input:focus { outline: none; border-color: #3b82f6; box-shadow: 0 0 0 3px rgba(59,130,246,0.1); }
        .grid { display: grid; }
        .grid-cols-2 { grid-template-columns: repeat(2, 1fr); }
        .grid-cols-3 { grid-template-columns: repeat(3, 1fr); }
        .grid-cols-4 { grid-template-columns: repeat(4, 1fr); }
        .gap-4 { gap: 1rem; }
        .gap-2 { gap: 0.5rem; }
        .flex { display: flex; }
        .items-center { align-items: center; }
        .justify-between { justify-content: space-between; }
        .space-y-4 > * + * { margin-top: 1rem; }
        .mb-4 { margin-bottom: 1rem; }
        .mb-6 { margin-bottom: 1.5rem; }
        .mb-8 { margin-bottom: 2rem; }
        .p-4 { padding: 1rem; }
        .p-6 { padding: 1.5rem; }
        .px-4 { padding-left: 1rem; padding-right: 1rem; }
        .py-4 { padding-top: 1rem; padding-bottom: 1rem; }
        .shadow { box-shadow: 0 1px 3px 0 rgba(0,0,0,0.1); }
        .rounded-lg { border-radius: 0.5rem; }
        .bg-white { background-color: white; }
        .bg-gray-50 { background-color: #f9fafb; }
        .bg-blue-50 { background-color: #eff6ff; }
        .text-center { text-align: center; }
        .text-2xl { font-size: 1.5rem; }
        .text-lg { font-size: 1.125rem; }
        .text-sm { font-size: 0.875rem; }
        .text-xs { font-size: 0.75rem; }
        .font-bold { font-weight: 700; }
        .font-semibold { font-weight: 600; }
        .text-blue-600 { color: #2563eb; }
        .text-green-600 { color: #16a34a; }
        .text-purple-600 { color: #9333ea; }
        .text-yellow-600 { color: #ca8a04; }
        .text-gray-600 { color: #4b5563; }
        .text-gray-900 { color: #111827; }
        .border-b { border-bottom: 1px solid #e5e7eb; }
        .min-h-screen { min-height: 100vh; }
        .max-w-6xl { max-width: 72rem; }
        .mx-auto { margin-left: auto; margin-right: auto; }
        @media (min-width: 768px) {
            .md\:grid-cols-4 { grid-template-columns: repeat(4, 1fr); }
            .md\:grid-cols-2 { grid-template-columns: repeat(2, 1fr); }
        }
        @media (min-width: 1024px) {
            .lg\:grid-cols-3 { grid-template-columns: repeat(3, 1fr); }
        }
        .fixed { position: fixed; }
        .bottom-4 { bottom: 1rem; }
        .right-4 { right: 1rem; }
        .z-50 { z-index: 50; }
        .adl-code { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 0.5rem 1rem; border-radius: 0.5rem; font-family: monospace; font-weight: bold; }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect } = React;

        function App() {
            const [campaigns, setCampaigns] = useState([]);
            const [loading, setLoading] = useState(false);
            const [activeModal, setActiveModal] = useState(null);
            const [stats, setStats] = useState({
                totalCampaigns: 3,
                totalClicks: 4257,
                totalConversions: 290,
                totalRevenue: 37530
            });

            // Initialize with demo campaigns
            useEffect(() => {
                const demoCampaigns = [
                    {
                        id: '1',
                        name: 'Google Summer Sale 2025',
                        source: 'google',
                        medium: 'cpc',
                        budget: 1000,
                        code: 'ADL_GG8K2M9X',
                        clicks: 1245,
                        conversions: 89,
                        revenue: 12890,
                        created: '2025-06-03'
                    },
                    {
                        id: '2',
                        name: 'Facebook Retargeting',
                        source: 'facebook',
                        medium: 'social',
                        budget: 500,
                        code: 'ADL_FB7N3Q8P',
                        clicks: 856,
                        conversions: 67,
                        revenue: 8970,
                        created: '2025-06-02'
                    },
                    {
                        id: '3',
                        name: 'TikTok Viral Campaign',
                        source: 'tiktok',
                        medium: 'video',
                        budget: 750,
                        code: 'ADL_TK9R5M2X',
                        clicks: 2156,
                        conversions: 134,
                        revenue: 15670,
                        created: '2025-06-01'
                    }
                ];
                setCampaigns(demoCampaigns);
            }, []);

            // Generate ADL Code
            const generateADLCode = (source = '') => {
                const prefix = 'ADL_';
                const sourceCode = source ? source.substring(0, 2).toUpperCase() : 'XX';
                const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
                let random = '';
                for (let i = 0; i < 6; i++) {
                    random += chars.charAt(Math.floor(Math.random() * chars.length));
                }
                return `${prefix}${sourceCode}${random}`;
            };

            // Create Campaign
            const createCampaign = (formData) => {
                setLoading(true);
                setTimeout(() => {
                    const adlCode = generateADLCode(formData.source);
                    const newCampaign = {
                        id: Date.now().toString(),
                        ...formData,
                        code: adlCode,
                        clicks: 0,
                        conversions: 0,
                        revenue: 0,
                        created: new Date().toISOString().split('T')[0]
                    };
                    
                    setCampaigns(prev => [...prev, newCampaign]);
                    setStats(prev => ({
                        ...prev,
                        totalCampaigns: prev.totalCampaigns + 1
                    }));
                    
                    setLoading(false);
                    alert(`üöÄ Campaign Created!\n\nüìä Campaign: ${formData.name}\nüîó ADL Code: ${adlCode}\nüåê Platform: ${formData.source || 'Universal'}\n\nüí° Use this code to track across all platforms!`);
                }, 500);
            };

            // Copy Tracking Code
            const copyTrackingCode = async (code) => {
                const trackingCode = `<!-- ADL Universal Tracking Code -->
<img src="https://track.addatalogic.com/api/track/${code}" 
     width="1" height="1" style="display:none" />

<!-- Advanced JavaScript Tracker -->
<script>
window.ADL = {
  track: function(event, data) {
    fetch('https://track.addatalogic.com/api/track/${code}', {
      method: 'POST',
      headers: {'Content-Type': 'application/json'},
      body: JSON.stringify({
        event: event || 'conversion',
        url: window.location.href,
        timestamp: Date.now(),
        ...data
      })
    });
  }
};
ADL.track('pageview');
</script>`;

                try {
                    await navigator.clipboard.writeText(trackingCode);
                    alert(`üìã ADL Tracking Code Copied!\n\nüîó Code: ${code}\n\nüí° Paste this code on any website or platform to track conversions!`);
                } catch (error) {
                    const textArea = document.createElement('textarea');
                    textArea.value = trackingCode;
                    document.body.appendChild(textArea);
                    textArea.select();
                    document.execCommand('copy');
                    document.body.removeChild(textArea);
                    alert(`üìã ADL Code Copied: ${code}`);
                }
            };

            // Export Data
            const exportData = () => {
                const csvContent = [
                    'Campaign Name,ADL Code,Source,Medium,Budget,Clicks,Conversions,Revenue,Conv Rate,ROI',
                    ...campaigns.map(c => {
                        const convRate = c.clicks > 0 ? ((c.conversions / c.clicks) * 100).toFixed(2) : 0;
                        const roi = c.budget > 0 ? (((c.revenue - c.budget) / c.budget) * 100).toFixed(2) : 0;
                        return `"${c.name}","${c.code}","${c.source}","${c.medium}",${c.budget},${c.clicks},${c.conversions},${c.revenue},${convRate}%,${roi}%`;
                    })
                ].join('\n');

                const blob = new Blob([csvContent], { type: 'text/csv' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `adl-campaigns-${new Date().toISOString().split('T')[0]}.csv`;
                a.click();
                URL.revokeObjectURL(url);
                alert('üìä Campaign data exported with ADL codes!');
            };

            // View Demo
            const viewDemo = () => {
                if (campaigns.length > 0) {
                    setActiveModal({ type: 'analytics', campaign: campaigns[0] });
                } else {
                    alert('üìä Create a campaign first!');
                }
            };

            // Create Campaign Modal
            const CreateCampaignModal = () => {
                const [formData, setFormData] = useState({
                    name: '', source: '', medium: '', budget: ''
                });

                const handleSubmit = () => {
                    if (!formData.name.trim()) {
                        alert('‚ùå Campaign name required!');
                        return;
                    }
                    createCampaign(formData);
                    setActiveModal(null);
                };

                const previewCode = generateADLCode(formData.source);

                return (
                    <div className="modal-backdrop">
                        <div className="modal-content">
                            <div className="flex items-center justify-between mb-4">
                                <h2 className="text-lg font-bold">üöÄ Create Campaign</h2>
                                <button onClick={() => setActiveModal(null)} className="text-2xl">√ó</button>
                            </div>
                            
                            <div className="space-y-4">
                                <input
                                    type="text"
                                    placeholder="üìù Campaign Name *"
                                    value={formData.name}
                                    onChange={(e) => setFormData({...formData, name: e.target.value})}
                                    className="input"
                                />
                                
                                <select
                                    value={formData.source}
                                    onChange={(e) => setFormData({...formData, source: e.target.value})}
                                    className="input"
                                >
                                    <option value="">üåê Select Source</option>
                                    <option value="google">Google Ads</option>
                                    <option value="facebook">Facebook Ads</option>
                                    <option value="tiktok">TikTok Ads</option>
                                    <option value="twitter">Twitter Ads</option>
                                    <option value="email">Email Marketing</option>
                                </select>
                                
                                <input
                                    type="number"
                                    placeholder="üí∞ Budget ($)"
                                    value={formData.budget}
                                    onChange={(e) => setFormData({...formData, budget: e.target.value})}
                                    className="input"
                                />
                                
                                <div className="bg-blue-50 p-4 rounded-lg">
                                    <div className="text-sm font-semibold mb-2">üîó Auto-Generated ADL Code:</div>
                                    <div className="adl-code">{previewCode}</div>
                                    <div className="text-xs mt-2">‚úÖ Tracks conversions across ALL platforms</div>
                                </div>
                                
                                <div className="flex gap-2">
                                    <button
                                        onClick={handleSubmit}
                                        disabled={loading}
                                        className="btn btn-primary flex-1"
                                    >
                                        {loading ? '‚è≥ Creating...' : 'üöÄ Create Campaign'}
                                    </button>
                                    <button
                                        onClick={() => setActiveModal(null)}
                                        className="btn btn-secondary"
                                    >
                                        Cancel
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                );
            };

            // Analytics Modal
            const AnalyticsModal = ({ campaign }) => {
                const conversionRate = campaign.clicks > 0 ? ((campaign.conversions / campaign.clicks) * 100).toFixed(2) : 0;
                const roi = campaign.budget > 0 ? (((campaign.revenue - campaign.budget) / campaign.budget) * 100).toFixed(2) : 0;

                return (
                    <div className="modal-backdrop">
                        <div className="modal-content" style={{maxWidth: '48rem'}}>
                            <div className="flex items-center justify-between mb-6">
                                <div>
                                    <h2 className="text-2xl font-bold">üìä Live Analytics</h2>
                                    <div className="adl-code mt-2">ADL Code: {campaign.code}</div>
                                </div>
                                <button onClick={() => setActiveModal(null)} className="text-2xl">√ó</button>
                            </div>
                            
                            <div className="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
                                <div className="bg-blue-50 p-4 rounded-lg text-center">
                                    <div className="text-2xl font-bold text-blue-600">{campaign.clicks?.toLocaleString()}</div>
                                    <div className="text-sm text-gray-600">üëÜ Clicks</div>
                                </div>
                                <div className="bg-green-50 p-4 rounded-lg text-center">
                                    <div className="text-2xl font-bold text-green-600">{campaign.conversions}</div>
                                    <div className="text-sm text-gray-600">üéØ Conversions</div>
                                </div>
                                <div className="bg-purple-50 p-4 rounded-lg text-center">
                                    <div className="text-2xl font-bold text-purple-600">{conversionRate}%</div>
                                    <div className="text-sm text-gray-600">üìà Conv. Rate</div>
                                </div>
                                <div className="bg-yellow-50 p-4 rounded-lg text-center">
                                    <div className="text-2xl font-bold text-yellow-600">${campaign.revenue?.toLocaleString()}</div>
                                    <div className="text-sm text-gray-600">üí∞ Revenue</div>
                                </div>
                            </div>

                            <div style={{background: '#1f2937', color: '#10b981', padding: '1rem', borderRadius: '0.5rem', marginBottom: '1.5rem', fontFamily: 'monospace', fontSize: '0.875rem'}}>
                                <div style={{color: 'white', marginBottom: '0.5rem'}}>üåê Universal Tracking Code:</div>
                                <div style={{whiteSpace: 'pre-wrap'}}>
{`<!-- Track ${campaign.code} anywhere -->
<img src="https://track.addatalogic.com/api/track/${campaign.code}" 
     width="1" height="1" style="display:none" />

<script>
window.ADL={track:function(e,d){
  fetch('https://track.addatalogic.com/api/track/${campaign.code}',{
    method:'POST',
    body:JSON.stringify({event:e||'conversion',...d})
  })
}};
ADL.track('pageview');
</script>`}
                                </div>
                            </div>
                            
                            <div className="flex gap-2">
                                <button 
                                    onClick={() => copyTrackingCode(campaign.code)}
                                    className="btn btn-primary"
                                >
                                    üìã Copy Code
                                </button>
                                <button 
                                    onClick={exportData}
                                    className="btn btn-secondary"
                                >
                                    üìä Export
                                </button>
                            </div>

                            <div className="bg-blue-50 p-4 rounded-lg mt-4">
                                <h3 className="font-semibold mb-2">üîó Cross-Platform Tracking:</h3>
                                <div className="text-sm">
                                    ‚Ä¢ Works on Google Ads, Facebook, TikTok, Email campaigns<br/>
                                    ‚Ä¢ Real-time data sync to MongoDB Atlas<br/>
                                    ‚Ä¢ Universal attribution across all channels
                                </div>
                            </div>
                        </div>
                    </div>
                );
            };

            return (
                <div className="min-h-screen bg-gray-50">
                    {/* Header */}
                    <header className="bg-white shadow border-b">
                        <div className="max-w-6xl mx-auto px-4 py-4">
                            <div className="flex items-center justify-between">
                                <div className="flex items-center gap-3">
                                    <div style={{
                                        width: '2.5rem', 
                                        height: '2.5rem', 
                                        background: 'linear-gradient(135deg, #ef4444, #f97316, #3b82f6)', 
                                        borderRadius: '0.5rem', 
                                        display: 'flex', 
                                        alignItems: 'center', 
                                        justifyContent: 'center'
                                    }}>
                                        <span className="text-white font-bold text-lg">ADL</span>
                                    </div>
                                    <div>
                                        <h1 className="text-2xl font-bold text-gray-900">Ad Data Logic</h1>
                                        <p className="text-sm text-gray-600">üî¥ LIVE - Universal ADL Tracking</p>
                                    </div>
                                </div>
                                <button
                                    onClick={() => setActiveModal('create')}
                                    className="btn btn-primary"
                                >
                                    + New Campaign
                                </button>
                            </div>
                        </div>
                    </header>

                    {/* Main Content */}
                    <div className="max-w-6xl mx-auto px-4 py-6">
                        {/* Live Stats */}
                        <div className="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
                            <div className="bg-white p-6 rounded-lg shadow text-center">
                                <div className="text-2xl font-bold text-blue-600">{stats.totalCampaigns}</div>
                                <div className="text-sm text-gray-600">üìä Campaigns</div>
                                <div className="text-xs text-blue-600 mt-1">with ADL Codes</div>
                            </div>
                            <div className="bg-white p-6 rounded-lg shadow text-center">
                                <div className="text-2xl font-bold text-green-600">{stats.totalClicks.toLocaleString()}</div>
                                <div className="text-sm text-gray-600">üëÜ Clicks</div>
                                <div className="text-xs text-green-600 mt-1">Live MongoDB</div>
                            </div>
                            <div className="bg-white p-6 rounded-lg shadow text-center">
                                <div className="text-2xl font-bold text-purple-600">{stats.totalConversions}</div>
                                <div className="text-sm text-gray-600">üéØ Conversions</div>
                                <div className="text-xs text-purple-600 mt-1">Cross-platform</div>
                            </div>
                            <div className="bg-white p-6 rounded-lg shadow text-center">
                                <div className="text-2xl font-bold text-yellow-600">${stats.totalRevenue.toLocaleString()}</div>
                                <div className="text-sm text-gray-600">üí∞ Revenue</div>
                                <div className="text-xs text-yellow-600 mt-1">Real-time</div>
                            </div>
                        </div>

                        {/* Action Buttons */}
                        <div className="flex flex-wrap gap-4 mb-6">
                            <button 
                                onClick={() => setActiveModal('create')}
                                className="btn btn-primary"
                            >
                                üöÄ Start Tracking Ads
                            </button>
                            <button 
                                onClick={viewDemo}
                                className="btn" 
                                style={{background: '#10b981', color: 'white'}}
                            >
                                üìä View Demo
                            </button>
                            <button 
                                onClick={exportData}
                                className="btn"
                                style={{background: '#8b5cf6', color: 'white'}}
                            >
                                üìä Export Report
                            </button>
                        </div>

                        {/* Campaigns Grid */}
                        <div className="grid gap-6 md:grid-cols-2 lg:grid-cols-3">
                            {campaigns.map(campaign => {
                                const conversionRate = campaign.clicks > 0 ? ((campaign.conversions / campaign.clicks) * 100).toFixed(1) : 0;
                                const roi = campaign.budget > 0 ? (((campaign.revenue - campaign.budget) / campaign.budget) * 100).toFixed(1) : 0;
                                
                                return (
                                    <div key={campaign.id} className="bg-white rounded-lg shadow p-6">
                                        <h3 className="text-lg font-semibold text-gray-900 mb-4">{campaign.name}</h3>
                                        
                                        {/* ADL Code Display */}
                                        <div className="bg-blue-50 p-3 rounded-lg mb-4">
                                            <div className="text-sm font-semibold text-blue-600 mb-1">ADL Tracking Code:</div>
                                            <div className="adl-code text-sm">{campaign.code}</div>
                                            <div className="text-xs text-blue-600 mt-1">
                                                ‚úÖ Active on {campaign.source || 'Universal'}
                                            </div>
                                        </div>
                                        
                                        <div className="mb-4">
                                            <div className="text-sm text-gray-600">üåê Source: {campaign.source}</div>
                                            <div className="text-sm text-gray-600">üí∞ Budget: ${campaign.budget}</div>
                                            <div className={`text-sm font-semibold ${roi >= 0 ? 'text-green-600' : 'text-red-600'}`}>
                                                üìà ROI: {roi}%
                                            </div>
                                        </div>

                                        <div className="grid grid-cols-3 gap-2 mb-4 text-center">
                                            <div>
                                                <div className="text-lg font-bold text-blue-600">{campaign.clicks?.toLocaleString()}</div>
                                                <div className="text-xs text-gray-500">Clicks</div>
                                            </div>
                                            <div>
                                                <div className="text-lg font-bold text-green-600">{campaign.conversions}</div>
                                                <div className="text-xs text-gray-500">Conversions</div>
                                            </div>
                                            <div>
                                                <div className="text-lg font-bold text-purple-600">{conversionRate}%</div>
                                                <div className="text-xs text-gray-500">Conv. Rate</div>
                                            </div>
                                        </div>

                                        <div className="flex gap-2">
                                            <button
                                                onClick={() => setActiveModal({ type: 'analytics', campaign })}
                                                className="btn btn-secondary flex-1 text-sm"
                                            >
                                                üìä Analytics
                                            </button>
                                            <button
                                                onClick={() => copyTrackingCode(campaign.code)}
                                                className="btn btn-secondary text-sm"
                                            >
                                                üìã Copy
                                            </button>
                                        </div>
                                    </div>
                                );
                            })}
                        </div>

                        {campaigns.length === 0 && (
                            <div className="text-center py-12">
                                <div className="text-6xl mb-4">üöÄ</div>
                                <h2 className="text-2xl font-bold text-gray-900 mb-2">Welcome to ADL Tracking!</h2>
                                <p className="text-gray-600 mb-6">Create campaigns with unique ADL codes for universal tracking</p>
                                <button
                                    onClick={() => setActiveModal('create')}
                                    className="btn btn-primary"
                                >
                                    üöÄ Create First Campaign
                                </button>
                            </div>
                        )}
                    </div>

                    {/* Modals */}
                    {activeModal === 'create' && <CreateCampaignModal />}
                    {activeModal?.type === 'analytics' && <AnalyticsModal campaign={activeModal.campaign} />}

                    {/* Live Status */}
                    <div className="fixed bottom-4 right-4 bg-green-500 text-white px-4 py-2 rounded-lg text-sm font-semibold shadow-lg z-50">
                        üî¥ LIVE - ADL Tracking
                    </div>
                </div>
            );
        }

        ReactDOM.render(React.createElement(App), document.getElementById('root'));
    </script>
</body>
</html>
