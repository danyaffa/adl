<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ADL - Ad Data Logic Universal Tracking</title>
    
    <!-- React & Dependencies -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone@7/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
        }
    </style>
</head>
<body class="bg-gray-50">
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect } = React;
        
        // Simple Icons (using text/unicode instead of Lucide)
        const icons = {
            Plus: () => <span>+</span>,
            Copy: () => <span>📋</span>,
            Download: () => <span>⬇️</span>,
            Eye: () => <span>👁️</span>,
            Edit: () => <span>✏️</span>,
            Pause: () => <span>⏸️</span>,
            Play: () => <span>▶️</span>,
            Trash: () => <span>🗑️</span>,
            RefreshCw: () => <span>🔄</span>,
            Settings: () => <span>⚙️</span>,
            TrendingUp: () => <span>📈</span>,
            MousePointer: () => <span>👆</span>,
            Target: () => <span>🎯</span>,
            DollarSign: () => <span>💰</span>,
            BarChart: () => <span>📊</span>,
            X: () => <span>❌</span>,
            Check: () => <span>✅</span>,
            Globe: () => <span>🌐</span>,
            Zap: () => <span>⚡</span>,
            Home: () => <span>🏠</span>,
            PlusCircle: () => <span>➕</span>,
            Activity: () => <span>📊</span>,
            User: () => <span>👤</span>
        };
        
        // ADL Code Generator
        const generateADLCode = (source) => {
            const prefix = 'ADL_';
            const sourceCode = source ? source.substring(0, 2).toUpperCase() : 'XX';
            const random = Math.random().toString(36).substring(2, 8).toUpperCase();
            return `${prefix}${sourceCode}${random}`;
        };
        
        // Platform options
        const platforms = [
            'Google Ads', 'Facebook Ads', 'TikTok Ads', 'Instagram Ads', 
            'LinkedIn Ads', 'Twitter Ads', 'Pinterest Ads', 'Snapchat Ads',
            'YouTube Ads', 'Amazon Ads', 'Microsoft Ads', 'Reddit Ads',
            'Spotify Ads', 'Taboola', 'Outbrain', 'Native Ads', 'Display Ads',
            'Email Marketing', 'SMS Marketing', 'Affiliate', 'Influencer',
            'Direct Mail', 'TV Ads', 'Radio Ads', 'Other'
        ];
        
        // Main App Component
        const ADLApp = () => {
            const [campaigns, setCampaigns] = useState([]);
            const [showCreateModal, setShowCreateModal] = useState(false);
            const [showAnalyticsModal, setShowAnalyticsModal] = useState(false);
            const [selectedCampaign, setSelectedCampaign] = useState(null);
            const [notification, setNotification] = useState(null);
            
            // Load campaigns on mount
            useEffect(() => {
                loadCampaigns();
                // Add sample data if empty
                const stored = localStorage.getItem('adl_campaigns');
                if (!stored) {
                    const sampleCampaign = {
                        id: 1,
                        name: 'Sample Campaign',
                        source: 'Google Ads',
                        budget: '1000',
                        targetUrl: 'https://example.com',
                        adlCode: 'ADL_GO123ABC',
                        status: 'active',
                        clicks: 150,
                        conversions: 12,
                        revenue: 480,
                        createdAt: new Date().toISOString()
                    };
                    setCampaigns([sampleCampaign]);
                    localStorage.setItem('adl_campaigns', JSON.stringify([sampleCampaign]));
                }
            }, []);
            
            // Load campaigns from localStorage
            const loadCampaigns = () => {
                try {
                    const stored = localStorage.getItem('adl_campaigns');
                    if (stored) {
                        setCampaigns(JSON.parse(stored));
                    }
                } catch (error) {
                    console.error('Error loading campaigns:', error);
                }
            };
            
            // Save campaigns to localStorage
            const saveCampaigns = (updatedCampaigns) => {
                try {
                    localStorage.setItem('adl_campaigns', JSON.stringify(updatedCampaigns));
                    setCampaigns(updatedCampaigns);
                } catch (error) {
                    console.error('Error saving campaigns:', error);
                }
            };
            
            // Show notification
            const showNotification = (message) => {
                setNotification(message);
                setTimeout(() => setNotification(null), 3000);
            };
            
            // Create Campaign Modal
            const CreateCampaignModal = () => {
                const [formData, setFormData] = useState({
                    name: '',
                    source: '',
                    budget: '',
                    targetUrl: ''
                });
                const [adlCode, setAdlCode] = useState('');
                
                useEffect(() => {
                    if (formData.source) {
                        setAdlCode(generateADLCode(formData.source));
                    }
                }, [formData.source]);
                
                const handleSubmit = (e) => {
                    e.preventDefault();
                    
                    const newCampaign = {
                        id: Date.now(),
                        ...formData,
                        adlCode,
                        status: 'active',
                        clicks: Math.floor(Math.random() * 100),
                        conversions: Math.floor(Math.random() * 10),
                        revenue: Math.random() * 1000,
                        createdAt: new Date().toISOString()
                    };
                    
                    const updatedCampaigns = [...campaigns, newCampaign];
                    saveCampaigns(updatedCampaigns);
                    
                    showNotification('Campaign created successfully!');
                    setShowCreateModal(false);
                    setFormData({ name: '', source: '', budget: '', targetUrl: '' });
                };
                
                return (
                    <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
                        <div className="bg-white rounded-xl shadow-2xl max-w-md w-full max-h-[90vh] overflow-y-auto">
                            <div className="p-6">
                                <div className="flex justify-between items-center mb-6">
                                    <h2 className="text-2xl font-bold text-gray-900">Create Campaign</h2>
                                    <button
                                        onClick={() => setShowCreateModal(false)}
                                        className="text-gray-400 hover:text-gray-600 text-2xl"
                                    >
                                        ×
                                    </button>
                                </div>
                                
                                <form onSubmit={handleSubmit} className="space-y-4">
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-1">
                                            Campaign Name
                                        </label>
                                        <input
                                            type="text"
                                            required
                                            value={formData.name}
                                            onChange={(e) => setFormData({...formData, name: e.target.value})}
                                            className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                            placeholder="Summer Sale 2024"
                                        />
                                    </div>
                                    
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-1">
                                            Ad Platform
                                        </label>
                                        <select
                                            required
                                            value={formData.source}
                                            onChange={(e) => setFormData({...formData, source: e.target.value})}
                                            className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                        >
                                            <option value="">Select Platform</option>
                                            {platforms.map(platform => (
                                                <option key={platform} value={platform}>{platform}</option>
                                            ))}
                                        </select>
                                    </div>
                                    
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-1">
                                            Budget ($)
                                        </label>
                                        <input
                                            type="number"
                                            required
                                            min="1"
                                            value={formData.budget}
                                            onChange={(e) => setFormData({...formData, budget: e.target.value})}
                                            className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                            placeholder="1000"
                                        />
                                    </div>
                                    
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-1">
                                            Target URL
                                        </label>
                                        <input
                                            type="url"
                                            required
                                            value={formData.targetUrl}
                                            onChange={(e) => setFormData({...formData, targetUrl: e.target.value})}
                                            className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                            placeholder="https://yoursite.com/landing"
                                        />
                                    </div>
                                    
                                    {adlCode && (
                                        <div className="bg-blue-50 p-4 rounded-lg">
                                            <div className="flex items-center justify-between mb-2">
                                                <span className="text-sm font-medium text-blue-900">Your ADL Code:</span>
                                                <button
                                                    type="button"
                                                    onClick={() => {
                                                        navigator.clipboard.writeText(adlCode);
                                                        showNotification('Code copied!');
                                                    }}
                                                    className="text-blue-600 hover:text-blue-800"
                                                >
                                                    📋
                                                </button>
                                            </div>
                                            <code className="text-lg font-mono text-blue-600">{adlCode}</code>
                                        </div>
                                    )}
                                    
                                    <div className="bg-green-50 p-4 rounded-lg">
                                        <div className="flex items-center">
                                            <span className="mr-2">✅</span>
                                            <span className="text-sm text-green-800">
                                                Tracks conversions across ALL platforms automatically
                                            </span>
                                        </div>
                                    </div>
                                    
                                    <button
                                        type="submit"
                                        className="w-full bg-blue-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-blue-700 transition-colors"
                                    >
                                        Create Campaign
                                    </button>
                                </form>
                            </div>
                        </div>
                    </div>
                );
            };
            
            // Campaign Card
            const CampaignCard = ({ campaign }) => {
                return (
                    <div className="bg-white rounded-lg shadow-sm border border-gray-200 p-4 hover:shadow-md transition-shadow">
                        <div className="flex justify-between items-start mb-3">
                            <div>
                                <h3 className="font-semibold text-gray-900">{campaign.name}</h3>
                                <p className="text-sm text-gray-600">{campaign.source}</p>
                                <p className="text-xs text-gray-500 mt-1">Code: {campaign.adlCode}</p>
                            </div>
                            <span className={`px-2 py-1 text-xs rounded-full ${
                                campaign.status === 'active' ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-800'
                            }`}>
                                {campaign.status}
                            </span>
                        </div>
                        
                        <div className="grid grid-cols-3 gap-2 mb-4">
                            <div>
                                <p className="text-xs text-gray-600">Clicks</p>
                                <p className="text-lg font-semibold">{campaign.clicks}</p>
                            </div>
                            <div>
                                <p className="text-xs text-gray-600">Conversions</p>
                                <p className="text-lg font-semibold">{campaign.conversions}</p>
                            </div>
                            <div>
                                <p className="text-xs text-gray-600">Revenue</p>
                                <p className="text-lg font-semibold">${campaign.revenue.toFixed(0)}</p>
                            </div>
                        </div>
                        
                        <div className="flex gap-2">
                            <button
                                onClick={() => {
                                    setSelectedCampaign(campaign);
                                    setShowAnalyticsModal(true);
                                }}
                                className="flex-1 bg-blue-50 text-blue-600 py-2 px-3 rounded-lg text-sm font-medium hover:bg-blue-100 transition-colors"
                            >
                                👁️ View
                            </button>
                            <button
                                onClick={() => {
                                    const updated = campaigns.map(c => 
                                        c.id === campaign.id ? {...c, status: c.status === 'active' ? 'paused' : 'active'} : c
                                    );
                                    saveCampaigns(updated);
                                    showNotification(`Campaign ${campaign.status === 'active' ? 'paused' : 'resumed'}!`);
                                }}
                                className="bg-gray-50 text-gray-600 py-2 px-3 rounded-lg text-sm font-medium hover:bg-gray-100 transition-colors"
                            >
                                {campaign.status === 'active' ? '⏸️' : '▶️'}
                            </button>
                            <button
                                onClick={() => {
                                    if (confirm('Delete this campaign?')) {
                                        const updated = campaigns.filter(c => c.id !== campaign.id);
                                        saveCampaigns(updated);
                                        showNotification('Campaign deleted!');
                                    }
                                }}
                                className="bg-red-50 text-red-600 py-2 px-3 rounded-lg text-sm font-medium hover:bg-red-100 transition-colors"
                            >
                                🗑️
                            </button>
                        </div>
                    </div>
                );
            };
            
            // Analytics Modal
            const AnalyticsModal = ({ campaign }) => {
                const conversionRate = campaign.clicks > 0 ? (campaign.conversions / campaign.clicks * 100).toFixed(2) : 0;
                const roi = campaign.budget > 0 ? ((campaign.revenue - campaign.budget) / campaign.budget * 100).toFixed(2) : 0;
                
                return (
                    <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
                        <div className="bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto">
                            <div className="p-6">
                                <div className="flex justify-between items-center mb-6">
                                    <h2 className="text-2xl font-bold text-gray-900">Campaign Analytics</h2>
                                    <button
                                        onClick={() => setShowAnalyticsModal(false)}
                                        className="text-gray-400 hover:text-gray-600 text-2xl"
                                    >
                                        ×
                                    </button>
                                </div>
                                
                                <div className="space-y-6">
                                    <div>
                                        <h3 className="text-lg font-semibold mb-2">{campaign.name}</h3>
                                        <p className="text-gray-600">ADL Code: {campaign.adlCode}</p>
                                    </div>
                                    
                                    <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
                                        <div className="bg-blue-50 p-4 rounded-lg">
                                            <div className="flex items-center mb-2">
                                                <span className="mr-2">👆</span>
                                                <span className="text-sm text-gray-600">Clicks</span>
                                            </div>
                                            <p className="text-2xl font-bold text-gray-900">{campaign.clicks}</p>
                                        </div>
                                        
                                        <div className="bg-green-50 p-4 rounded-lg">
                                            <div className="flex items-center mb-2">
                                                <span className="mr-2">🎯</span>
                                                <span className="text-sm text-gray-600">Conversions</span>
                                            </div>
                                            <p className="text-2xl font-bold text-gray-900">{campaign.conversions}</p>
                                        </div>
                                        
                                        <div className="bg-yellow-50 p-4 rounded-lg">
                                            <div className="flex items-center mb-2">
                                                <span className="mr-2">💰</span>
                                                <span className="text-sm text-gray-600">Revenue</span>
                                            </div>
                                            <p className="text-2xl font-bold text-gray-900">${campaign.revenue.toFixed(2)}</p>
                                        </div>
                                        
                                        <div className="bg-purple-50 p-4 rounded-lg">
                                            <div className="flex items-center mb-2">
                                                <span className="mr-2">📈</span>
                                                <span className="text-sm text-gray-600">ROI</span>
                                            </div>
                                            <p className="text-2xl font-bold text-gray-900">{roi}%</p>
                                        </div>
                                    </div>
                                    
                                    <div className="bg-gray-50 p-4 rounded-lg">
                                        <h4 className="font-semibold mb-2">Tracking Code</h4>
                                        <pre className="bg-gray-800 text-white p-4 rounded-lg text-xs overflow-x-auto">
{`<script>
window.ADL = {
  track: function(event, data) {
    fetch('https://track.addatalogic.com/api/track/${campaign.adlCode}', {
      method: 'POST',
      headers: {'Content-Type': 'application/json'},
      body: JSON.stringify({
        event: event || 'conversion',
        url: window.location.href,
        timestamp: Date.now(),
        ...data
      })
    });
  }
};
ADL.track('pageview');
</script>`}
                                        </pre>
                                        <button
                                            onClick={() => {
                                                const code = `<script>window.ADL={track:function(event,data){fetch('https://track.addatalogic.com/api/track/${campaign.adlCode}',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({event:event||'conversion',url:window.location.href,timestamp:Date.now(),...data})})}};ADL.track('pageview');</script>`;
                                                navigator.clipboard.writeText(code);
                                                showNotification('Tracking code copied!');
                                            }}
                                            className="mt-2 text-blue-600 hover:text-blue-800 flex items-center"
                                        >
                                            📋 Copy Code
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                );
            };
            
            // Dashboard View
            const DashboardView = () => {
                const totalClicks = campaigns.reduce((sum, c) => sum + c.clicks, 0);
                const totalConversions = campaigns.reduce((sum, c) => sum + c.conversions, 0);
                const totalRevenue = campaigns.reduce((sum, c) => sum + c.revenue, 0);
                const totalBudget = campaigns.reduce((sum, c) => sum + parseFloat(c.budget || 0), 0);
                const overallROI = totalBudget > 0 ? ((totalRevenue - totalBudget) / totalBudget * 100).toFixed(2) : 0;
                
                return (
                    <div className="space-y-6">
                        <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
                            <div className="bg-white p-4 rounded-lg shadow-sm border border-gray-200">
                                <div className="flex items-center justify-between mb-2">
                                    <span className="text-sm text-gray-600">Total Clicks</span>
                                    <span>👆</span>
                                </div>
                                <p className="text-2xl font-bold text-gray-900">{totalClicks}</p>
                            </div>
                            
                            <div className="bg-white p-4 rounded-lg shadow-sm border border-gray-200">
                                <div className="flex items-center justify-between mb-2">
                                    <span className="text-sm text-gray-600">Conversions</span>
                                    <span>🎯</span>
                                </div>
                                <p className="text-2xl font-bold text-gray-900">{totalConversions}</p>
                            </div>
                            
                            <div className="bg-white p-4 rounded-lg shadow-sm border border-gray-200">
                                <div className="flex items-center justify-between mb-2">
                                    <span className="text-sm text-gray-600">Revenue</span>
                                    <span>💰</span>
                                </div>
                                <p className="text-2xl font-bold text-gray-900">${totalRevenue.toFixed(2)}</p>
                            </div>
                            
                            <div className="bg-white p-4 rounded-lg shadow-sm border border-gray-200">
                                <div className="flex items-center justify-between mb-2">
                                    <span className="text-sm text-gray-600">Overall ROI</span>
                                    <span>📈</span>
                                </div>
                                <p className="text-2xl font-bold text-gray-900">{overallROI}%</p>
                            </div>
                        </div>
                        
                        <div className="flex justify-between items-center">
                            <h2 className="text-xl font-bold text-gray-900">Active Campaigns</h2>
                            <button
                                onClick={() => {
                                    // Simulate data refresh
                                    const updated = campaigns.map(c => ({
                                        ...c,
                                        clicks: c.clicks + Math.floor(Math.random() * 10),
                                        conversions: c.conversions + Math.floor(Math.random() * 2),
                                        revenue: c.revenue + (Math.random() * 100)
                                    }));
                                    saveCampaigns(updated);
                                    showNotification('Data refreshed!');
                                }}
                                className="text-blue-600 hover:text-blue-800"
                            >
                                🔄 Refresh
                            </button>
                        </div>
                        
                        {campaigns.length === 0 ? (
                            <div className="bg-white rounded-lg p-8 text-center border-2 border-dashed border-gray-300">
                                <span className="text-6xl mb-4 block">📊</span>
                                <h3 className="text-lg font-medium text-gray-900 mb-2">No campaigns yet</h3>
                                <p className="text-gray-600 mb-4">Create your first campaign to start tracking</p>
                                <button
                                    onClick={() => setShowCreateModal(true)}
                                    className="bg-blue-600 text-white py-2 px-4 rounded-lg font-medium hover:bg-blue-700 transition-colors"
                                >
                                    + Create Campaign
                                </button>
                            </div>
                        ) : (
                            <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-3">
                                {campaigns.map(campaign => (
                                    <CampaignCard key={campaign.id} campaign={campaign} />
                                ))}
                            </div>
                        )}
                    </div>
                );
            };
            
            return (
                <div className="min-h-screen bg-gray-50">
                    {/* Header */}
                    <header className="bg-white shadow-sm border-b border-gray-200">
                        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                            <div className="flex justify-between items-center h-16">
                                <div className="flex items-center">
                                    <span className="text-2xl mr-3">⚡</span>
                                    <h1 className="text-xl font-bold text-gray-900">ADL</h1>
                                    <span className="ml-2 text-sm text-gray-500">Universal Tracking</span>
                                </div>
                                
                                <button
                                    onClick={() => setShowCreateModal(true)}
                                    className="bg-blue-600 text-white py-2 px-4 rounded-lg font-medium hover:bg-blue-700 transition-colors"
                                >
                                    + Create Campaign
                                </button>
                            </div>
                        </div>
                    </header>
                    
                    {/* Main Content */}
                    <main className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                        <DashboardView />
                    </main>
                    
                    {/* Modals */}
                    {showCreateModal && <CreateCampaignModal />}
                    {showAnalyticsModal && selectedCampaign && <AnalyticsModal campaign={selectedCampaign} />}
                    
                    {/* Notification */}
                    {notification && (
                        <div className="fixed top-4 right-4 z-50">
                            <div className="bg-green-500 text-white p-4 rounded-lg shadow-lg">
                                {notification}
                            </div>
                        </div>
                    )}
                </div>
            );
        };
        
        // Render the app
        ReactDOM.render(<ADLApp />, document.getElementById('root'));
    </script>
</body>
</html>
